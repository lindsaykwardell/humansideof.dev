---
import { extract, FeedData, FeedEntry } from '@extractus/feed-extractor'

const {title, description, entries} = await extract('https://anchor.fm/s/81f880f0/podcast/rss', {
	descriptionMaxLen: 999999,
	getExtraEntryFields: (feedEntry: any) => {
    const {
      enclosure,
    } = feedEntry
    return {
      enclosure: {
        url: enclosure['@_url'],
        type: enclosure['@_type'],
        length: enclosure['@_length']
      },
	  summary: feedEntry['itunes:summary']
    }
  }
}) as any

---

<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width" />
	<title>{title}</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&family=Rubik:wght@300&display=swap" rel="stylesheet">
</head>

<body class="bg-slate-800 text-white dark font-rubik">
	<div class="xl:w-3/5 lg:w-3/4 md:w-5/6 w-full m-auto md:mt-12">
		<header class="bg-black flex flex-col md:flex-row shadow-lg rounded">
			<img src="/images/logo.jpg" class="w-[250px] m-auto" alt="Human Side of Dev" />
			<div class="flex flex-col justify-center items-center flex-grow gap-6">
				<h2 class="text-xl md:text-2xl text-center pt-3 md:pt-0 italic text-slate-300 mx-3">Listen to developers talk about their experiences in the tech industry.</h2>
				<div class="flex gap-3 mb-4">
					<a href="https://podcasts.apple.com/us/podcast/human-side-of-dev/id1671873029"><img src="/images/apple.png" class="w-8 border-transparent hover:border-white border rounded-lg" /></a>
					<a href="https://open.spotify.com/show/2aZnkERaQhEbglgP8kRUh0"><img src="/images/spotify.png" class="w-8 border-transparent hover:border-white border rounded-lg" /></a>
					<a href="https://anchor.fm/s/81f880f0/podcast/rss"><img src="/images/rss.svg" class="w-8 border-transparent hover:border-white border rounded-lg" /></a>
				</div>
				<!-- <div class="bg-gray-900 flex gap-6 p-4 mx-3 mb-3 w-full md:w-[500px]">
					<div class="">
						<img src="https://www.lindsaykwardell.com/lindsay.jpg" class="rounded-full w-32 h-32 p-2 border border-white object-cover" />
					</div>
					<div class="flex flex-col gap-3">
						<h3 class="text-xl">Lindsay Wardell</h3>
						<a href="https://www.lindsaykwardell.com/@lindsay" class="flex gap-1 underline text-gray-200 hover:text-gray-100 text-sm">
							<svg width="32" height="32" viewBox="0 0 24 24"><path d="M16 17.24c2.5-.3 4.69-1.84 5-3.25a33.59 33.59 0 0 0 .4-5.42C21.33 4.23 18.48 3 18.48 3A17.64 17.64 0 0 0 12 2a17.64 17.64 0 0 0-6.48 1S2.68 4.23 2.68 8.57v3.44c.1 4.24.78 8.42 4.7 9.46A14.73 14.73 0 0 0 12 22a9.21 9.21 0 0 0 3.54-.81l-.07-1.64A11.41 11.41 0 0 1 12 20c-1.8-.06-3.71-.19-4-2.4a4.26 4.26 0 0 1 0-.63a22.68 22.68 0 0 0 4 .54a23.6 23.6 0 0 0 4-.27zm-6.54-9.8q-1.35 0-1.35 1.62v5.1H6V8.9a3.78 3.78 0 0 1 .82-2.56a2.85 2.85 0 0 1 2.23-1a2.68 2.68 0 0 1 2.4 1.23l.52.87l.52-.87a2.68 2.68 0 0 1 2.4-1.23a2.85 2.85 0 0 1 2.23 1A3.78 3.78 0 0 1 18 8.9v5.26h-2.11v-5.1q0-1.62-1.35-1.62c-1 0-1.51.64-1.51 1.92v2.79H11V9.36c0-1.28-.54-1.92-1.54-1.92z" fill="currentColor"/></svg>
							Mastodon
						</a>
					</div>
				</div> -->
			</div>
		</header>
		<main class="p-6">
			{entries?.map((episode: any) => 
				<article class="flex flex-col gap-4 bg-slate-900 p-4 shadow-lg rounded">
					<h2 class="text-3xl font-josefin">{episode.title}</h2>
					<div class="prose dark:prose-dark m-auto">
						<p set:html={episode.summary} />	
					</div>
					<audio controls class="w-full">
						<source src={episode?.enclosure.url} />
					</audio>
				</article>
			)}
		</main>
		<footer class="text-center smallcaps text-sm text-slate-400 py-5">
			Copyright Â© Lindsay Wardell
		</footer>
	</div>
</body>

</html>